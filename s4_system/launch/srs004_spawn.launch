<?xml version="1.0"?>
<launch>
    <arg name="robot" default="default_robot"/>
    <arg name="target" default="sim"/>

    <group ns="$(arg robot)">
        <arg name="model" default="$(find s4_launch)/urdf/single_robot.urdf.xacro"/>
        <param name="robot_description" command="$(find xacro)/xacro --inorder $(arg model)" />
        <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" >
            <param name="robot_description" value="$(arg robot)/robot_description" />
            <param name="tf_prefix" value="$(arg robot)"/>
        </node>
        <include file="$(find s4_system)/launch/main.launch" >
            <arg name="target" value="$(arg target)"/>
            <arg name="ns"     value="$(arg robot)"/>
            <arg name="unit"   value="system0"/>
        </include>
        <include file="$(find s4_omni)/launch/main.launch" >
            <arg name="target" value="$(arg target)"/>
            <arg name="ns"     value="$(arg robot)"/>
            <arg name="unit"   value="omni0"/>
        </include>
        <include file="$(find s4_gun)/launch/main.launch" >
            <arg name="target" value="$(arg target)"/>
            <arg name="ns"     value="$(arg robot)"/>
            <arg name="unit"   value="gun0"/>
        </include>
        <include file="$(find s4_hitsensor)/launch/main.launch" >
            <arg name="target" value="$(arg target)"/>
            <arg name="ns"     value="$(arg robot)"/>
            <arg name="unit"   value="hitsensor0"/>
        </include>
		<include file="$(find s4_comport)/launch/main.launch" >
            <arg name="target" value="$(arg target)"/>
            <arg name="ns"     value="$(arg robot)"/>
            <arg name="unit"   value="comport0"/>
        </include>
    </group>
</launch>

